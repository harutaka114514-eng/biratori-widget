<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>biratori-widget</title>
<style>
/* èƒŒæ™¯ã‚’å‹•çš„ã«è¨­å®šã™ã‚‹ãŸã‚ã®ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
body {
  font-family: "Segoe UI", "Hiragino Sans", "Noto Sans JP", sans-serif;
  background-color: #f0f0f0;
  background-position: center;
  background-size: cover;
  background-attachment: fixed;
  background-repeat: no-repeat;
  transition: background-image 0.5s ease-in-out;
  padding: 15px;
  color: #333;
  margin: 0;
}

/* èƒŒæ™¯ã®ä¸Šã«è–„ã„è†œã‚’å¼µã£ã¦æ–‡å­—ã‚’èª­ã¿ã‚„ã™ãã™ã‚‹ */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(255, 255, 255, 0.4); /* èƒŒæ™¯ç”»åƒã®é€éåº¦ã‚’èª¿æ•´ */
  z-index: -1;
}

h1 { margin: 5px 0 10px; font-size: 20px; font-weight: 600; text-align: center; text-shadow: 1px 1px 2px white; }
.widgets { display: flex; flex-direction: column; gap: 15px; max-width: 900px; margin: 0 auto; }
.widget { background: rgba(255, 255, 255, 0.9); padding: 15px; border-radius: 18px; box-shadow: 0 10px 25px rgba(0,0,0,.1); display: flex; flex-direction: column; box-sizing: border-box; }

.top-row { display: grid; grid-template-columns: 1fr 200px; gap: 12px; align-items: stretch; }
.info-bar { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
#clock { font-size: 22px; font-weight: 700; font-family: monospace; white-space: nowrap; }
.weather-area { display: flex; align-items: center; gap: 8px; white-space: nowrap; }
.weather-label { font-size: 12px; color: #666; font-weight: bold; background: #eee; padding: 2px 6px; border-radius: 4px; text-decoration: none; }
.weather { font-size: 20px; font-weight: 700; }

.extra-info { display: flex; gap: 15px; flex-grow: 1; justify-content: center; border-left: 1px solid #ddd; border-right: 1px solid #ddd; padding: 0 15px; margin: 0 5px; overflow: hidden; }
.info-item { text-align: center; min-width: 0; flex: 1; display: flex; flex-direction: column; justify-content: center; }
.info-item .label { font-size: 10px; color: #888; display: block; margin-bottom: 3px; font-weight: bold; }
.info-item .content { font-size: 15px; font-weight: 700; color: #222; line-height: 1.3; word-break: break-all; }
.info-item .content span { display: block; font-size: 11px; color: #555; font-weight: normal; margin-top: 2px; }

.garbage-button { background: #fef3c7; border-radius: 12px; padding: 10px; font-size: 13px; border: 1px solid #f59e0b; text-align: center; display: flex; flex-direction: column; justify-content: center; cursor: pointer; font-weight: bold; text-decoration: none; color: #92400e; min-height: 70px; transition: transform 0.2s; }
.garbage-button:hover { transform: scale(1.02); }
.garbage-button span { font-size: 10px; font-weight: normal; margin-top: 4px; }

/* YouTubeåˆ‡ã‚Šæ›¿ãˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
.video-tabs { display: flex; gap: 10px; margin-bottom: 10px; }
.video-tabs button { flex: 1; padding: 8px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; font-size: 12px; background: #eee; color: #666; transition: 0.2s; }
.video-tabs button.active { background: #ff0000; color: #fff; }

.video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background: #000; }
.video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

.bottom-row { display: grid; grid-template-columns: 1fr 280px; gap: 12px; }
.news-tabs { display: flex; gap: 6px; margin-bottom: 10px; overflow-x: auto; padding-bottom: 8px; }
.news-tabs button { padding: 6px 14px; font-size: 11px; background: #e5e7eb; border: 0; border-radius: 999px; cursor: pointer; white-space: nowrap; }
.news-tabs button.active { background: #2563eb; color: #fff; }
.news-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px; }
.news-list li { background: #fff; border-radius: 10px; padding: 10px; border: 1px solid #eee; }
.news-list a { text-decoration: none; color: #1a1a1a; font-size: 13px; line-height: 1.4; font-weight: 600; }

.cal-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.cal-btn { background: none; border: none; font-size: 18px; cursor: pointer; padding: 0 10px; color: #2563eb; font-weight: bold; }
.cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
.cal-header { font-size: 10px; font-weight: bold; text-align: center; padding-bottom: 4px; color: #666; }
.cal-cell { background: #f8fafc; border-radius: 5px; padding: 4px; min-height: 40px; text-align: center; font-size: 11px; display: flex; flex-direction: column; justify-content: flex-start; }
.cal-num { font-weight: 700; } 
.sun { color: #ef4444; } 
.sat { color: #3b82f6; } 
.cal-today { outline: 2px solid #2563eb; background: #eff6ff; }
.cal-dim { opacity: 0.4; }
.holiday-name { font-size: 8px; color: #ef4444; margin-top: 2px; line-height: 1; }

@media(max-width:850px){ .info-bar { flex-wrap: wrap; justify-content: center; } .extra-info { border: 0; padding: 10px 0; width: 100%; } }
@media(max-width:750px){ .top-row, .bottom-row { grid-template-columns: 1fr; } }
</style>
</head>
<body>

<h1>biratori-widget</h1>

<div class="widgets">
  <div class="top-row">
    <div class="widget">
      <div class="info-bar">
        <div id="clock">--:--:--</div>
        <div class="extra-info">
          <div class="info-item"><span class="label">ä»Šæ—¥ã®é‹å‹¢</span><div id="fortune" class="content">...</div></div>
          <div class="info-item"><span class="label">å¹³å–ã‚¢ã‚¤ãƒŒèª</span><div id="ainu" class="content">...</div></div>
        </div>
        <div class="weather-area">
          <a href="https://tenki.jp/forecast/1/2/2110/1601/" target="_blank" class="weather-label">å¹³å–</a>
          <div id="weather" class="weather">--â„ƒ</div>
        </div>
      </div>
    </div>
    <a href="https://biratorieisei-hokkaido.jp/biratorieisei/wp-content/uploads/r7biratori.pdf" target="_blank" class="garbage-button">
      ğŸ—‘ R7å¹´åº¦ã”ã¿åé›†PDF<span>ğŸ”¥æœˆæœ¨ / â™»æ°´</span>
    </a>
  </div>

  <div class="widget">
    <div class="video-tabs">
      <button id="btn-v1" class="active" onclick="switchVideo('tvgbZZYS4Nk', 'btn-v1')">åŒ—æµ·é“ãƒ‹ãƒ¥ãƒ¼ã‚¹</button>
      <button id="btn-v2" onclick="switchVideo('c6Gqe6L_xZg', 'btn-v2')">ãƒ©ã‚¤ãƒ–ã‚«ãƒ¡ãƒ©</button>
    </div>
    <div class="video-container">
      <iframe id="main-video" src="https://www.youtube.com/embed/tvgbZZYS4Nk?autoplay=1&mute=1&rel=0" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  <div class="bottom-row">
    <div class="widget">
      <div class="news-tabs">
        <button data-type="nhk" class="active">NHK</button>
        <button data-type="doshin">é“æ–°</button>
        <button data-type="nl">åŒ—æµ·é“NL</button>
        <button data-type="tomakomai">è‹«å°ç‰§</button>
        <button data-type="omocoro">ã‚ªãƒ¢ã‚³ãƒ­</button>
        <button data-type="rocket">ãƒ­ã‚±ãƒƒãƒˆãƒ‹ãƒ¥ãƒ¼ã‚¹24</button>
        <button data-type="v4jp">VALORANTãƒ‹ãƒ¥ãƒ¼ã‚¹</button>
      </div>
      <ul id="news" class="news-list"></ul>
    </div>
    <div class="widget">
      <div class="cal-nav">
        <button class="cal-btn" onclick="changeMonth(-1)">â—€</button>
        <div id="calTitle" style="font-weight:bold; font-size:14px;"></div>
        <button class="cal-btn" onclick="changeMonth(1)">â–¶</button>
      </div>
      <div class="cal-grid" id="calGrid"></div>
    </div>
  </div>
</div>

<script>
// èƒŒæ™¯ç”»åƒã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¨­å®š
function setRandomBackground() {
  const images = [
    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e',
    'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05',
    'https://images.unsplash.com/photo-1444090542259-0af8fa96557e',
    'https://images.unsplash.com/photo-1501785888041-af3ef285b470',
    'https://images.unsplash.com/photo-1426604966848-d7adac402bff',
    'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b',
    'https://images.unsplash.com/photo-1506744038136-46273834b3fb',
    'https://images.unsplash.com/photo-1500382017468-9049fed747ef'
  ];
  const selected = images[Math.floor(Math.random() * images.length)];
  document.body.style.backgroundImage = `url('${selected}?auto=format&fit=crop&w=1600&q=80')`;
}
setRandomBackground();

// YouTubeåˆ‡ã‚Šæ›¿ãˆé–¢æ•°
function switchVideo(id, btnId) {
  document.getElementById('main-video').src = `https://www.youtube.com/embed/${id}?autoplay=1&mute=1&rel=0`;
  document.querySelectorAll('.video-tabs button').forEach(b => b.classList.remove('active'));
  document.getElementById(btnId).classList.add('active');
}

let currentViewDate = new Date();

function clock(){
  const n=new Date();
  const m=n.getMonth()+1, d=n.getDate(), w=['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'][n.getDay()];
  const h=String(n.getHours()).padStart(2,"0"), i=String(n.getMinutes()).padStart(2,"0"), s=String(n.getSeconds()).padStart(2,"0");
  document.getElementById("clock").innerHTML=`<span style="font-size:14px">${m}/${d}(${w})</span> ${h}:${i}:${s}`;
}
setInterval(clock, 1000); clock();

function loadExtraInfo() {
  const fortunes = ["å¤§å‰ ğŸŒŸ","ä¸­å‰ ğŸ˜Š","å°å‰ âœ¨","å‰ ğŸ€","æœ«å‰ ğŸ•Šï¸","å¹³å–å‰ ğŸ…"];
  const ainuWords = [
    ["ã‚¤ãƒ©ãƒ³ã‚«ãƒ©ã‡·ã‚šãƒ†", "ã“ã‚“ã«ã¡ã¯"], ["ã‚¤ãƒ¤ã‚¤ãƒ©ã‚¤ã‚±ãƒ¬", "ã‚ã‚ŠãŒã¨ã†"], ["ã‚¹ã‚¤ ã‚¦ãƒŒã‚«ãƒ©ãƒ³ ãƒ­", "ã¾ãŸä¼šã„ã¾ã—ã‚‡ã†"], ["ãƒ’ãƒ³ãƒŠ", "ç¾å‘³ã—ã„/æ„Ÿè¬"], ["ãƒ”ãƒªã‚«", "è‰¯ã„/ãã‚Œã„"], ["ã‚«ãƒ ã‚¤", "ç¥/éœŠçš„å­˜åœ¨"], ["ã‚³ã‚¿ãƒ³", "æ‘/é›†è½"], ["ã‚¤ã‚¿ã‡°", "è¨€è‘‰/è©±ã™"], ["ãƒã‚»", "å®¶"], ["ã‚¢ãƒš", "ç«"],
    ["ãƒ¯ãƒƒã‚«", "æ°´"], ["ãƒ¬ãƒ©", "é¢¨"], ["ãƒãƒã‚¦", "æ˜Ÿ"], ["ãƒãƒ¥ã‡·ã‚š", "å¤ªé™½/æœˆ"], ["ã‚·ãƒª", "å¤§åœ°"], ["ã‚¦ãƒãƒ", "æ­Œ"], ["ãƒªãƒ ã‚»", "è¸Šã‚Š"], ["ãƒ ãƒƒã‚¯ãƒª", "å£ç´"], ["ãƒˆãƒ³ã‚³ãƒª", "äº”å¼¦ç´"], ["ã‚¤ã‚ªãƒãƒ³ãƒ†", "å„€å¼"],
    ["ã‚¢ãƒˆã‚¥ã‚¤", "æµ·"], ["ãƒŠã‚¤", "å·"], ["ãƒšãƒƒ", "å·"], ["ãƒŒãƒ—ãƒª", "å±±"], ["ã‚­ãƒ ãƒ³", "å±±ã®ã»ã†"], ["ãƒ”ãƒ©", "å´–"], ["ã‚µãƒ«", "æ¹¿åŸ"], ["ãƒ‹ã‚¿ã‚¤", "æ£®"], ["ãƒ‹", "æœ¨"], ["ãƒãƒ³ãƒ", "èŠ±"],
    ["ã‚¢ãƒ‘ãƒ", "èŠ±"], ["ãƒˆãƒ‹", "ãƒŠãƒ©"], ["ã‚¿ãƒƒãƒ‹", "ã‚«ãƒ³ãƒ"], ["ãƒã‚«ã‡·ã‚š", "é³¥"], ["ãƒ¦ã‡°", "é¹¿"], ["ã‚­ãƒ ãƒ³ã‚«ãƒ ã‚¤", "ç†Š"], ["ãƒã‚§ã‡·ã‚š", "é­š"], ["ã‚«ãƒ ã‚¤ãƒã‚§ã‡·ã‚š", "é®­"], ["ãƒ›ãƒ­ã‚±ã‚¦", "ç‹¼"], ["ãƒ¬ãƒ—ãƒ³ã‚«ãƒ ã‚¤", "ã‚·ãƒ£ãƒ"],
    ["ãƒãƒ­ãƒ³ãƒŒã‡·ã‚š", "ã‚­ãƒ„ãƒ"], ["ã‚¤ã‚»ãƒ", "ã‚¦ã‚µã‚®"], ["ãƒ¢ãƒ¦ã‡°", "ã‚¿ãƒŒã‚­"], ["ã‚«ãƒ‘ãƒƒ", "çš®"], ["ã‚¢ãƒƒãƒˆã‚¥ã‡±", "æ¨¹çš®è¡£"], ["ãƒ†ãƒãƒƒãƒ‘", "å…¥ã‚Œå¢¨"], ["ã‚¤ã‚¿ãƒ³ã‚­", "æ¤€"], ["ãƒ‹ãƒ", "ç›†"], ["ãƒã‚­ãƒª", "å°åˆ€"], ["ã‚¤ãƒŠã‚¦", "æœ¨å¹£"],
    ["ã‚¦ãƒ‘ã‡±", "é›ª"], ["ãƒ«", "é“"], ["ã‚¯", "å¼“"], ["ã‚¢ã‚¤", "çŸ¢"], ["ã‚«ãƒ¤", "å¸†"], ["ãƒãƒƒãƒ—", "èˆŸ"], ["ãƒ©ãƒƒãƒãƒ£ã‚³", "ç¯æ˜"], ["ã‚µãƒ©ãƒ³ãƒ‘", "ã•ã‚ˆã†ãªã‚‰"], ["ã‚¦ã‚§ãƒ³", "æ‚ªã„"], ["ã‚¨ã‚«ã‚·", "é•·è€/ç¥–çˆ¶"],
    ["ãƒ•ãƒ", "ç¥–æ¯"], ["ã‚ªã‚­ã‚¯ãƒ«ãƒŸ", "æ–‡åŒ–ç¥"], ["ã‚³ãƒ­ãƒãƒƒã‚¯ãƒ«", "è•—ã®ä¸‹ã®äºº"], ["ãƒ‹ãƒ–ã‚¿ãƒ‹", "äºŒé¢¨è°·"], ["ã‚·ã‚·ãƒªãƒ ã‚«", "æ²™æµå·"], ["ã‚¨ãƒˆã‚¥", "é¼»/å²¬"], ["ã‚­ã‚­ãƒª", "è™«"], ["ã‚±ãƒ", "è¶³"], ["ãƒ†ã‚±", "æ‰‹"], ["ã‚·ã‚­", "ç›®"],
    ["ãƒ‘ãƒ©", "å£"], ["ãƒ¬ã‡·ã‚š", "æ²–"], ["ãƒ¤", "é™¸"], ["ãƒãƒƒ", "ã‚ã”"], ["ãƒ«ãƒ«", "æ±"], ["ã‚¢ãƒãƒ ", "ç©€ç‰©/ã”é£¯"], ["ãƒˆã‚«ã‡·ã‚š", "æ˜¼"], ["ã‚¯ãƒ³ãƒ", "é»’/å¤œ"], ["ãƒ¬ãƒ©", "é¢¨"], ["ã‚»ã‚¿", "çŠ¬"],
    ["ãƒãƒ£ãƒƒãƒ”", "é›¨"], ["ãƒ«ãƒ¼", "é“"], ["ã‚¦ã‚§ãƒ³ãƒš", "æ‚ªã„å¥´"], ["ã‚³ãƒ³ã‚«ãƒ‹", "é‡‘"], ["ã‚·ãƒ­ã‚«ãƒ‹", "éŠ€"], ["ãƒãƒ", "æ¯"], ["ãƒŸãƒ", "çˆ¶"], ["ã‚¢ã‚·ãƒª", "æ–°ã—ã„"], ["ãƒ‹ã‚µãƒƒã‚¿", "æ˜æ—¥"], ["ãƒ˜ã‚«ãƒƒãƒ†ã‚£", "å­ä¾›"],
    ["ãƒãƒƒãƒ", "å¥³"], ["ãƒ”ãƒ³ãƒ", "ç”·"], ["ã‚¯ãƒƒãƒãƒ£ãƒ­", "å–‰"], ["ãƒˆ", "æ¹–"], ["ã‚µãƒƒ", "ä¹¾ã„ãŸ"], ["ãƒ¤ã‡º", "å†·ãŸã„"], ["ã‚»ã‚»ã‡°", "ç†±ã„"], ["ãƒ¬ãƒ©ã‚³ãƒ­", "é¢¨ãŒã‚ã‚‹"], ["ã‚¦ãƒãƒã‚¤", "æ°‘æ—å…±ç”Ÿè±¡å¾´ç©ºé–“"], ["ãƒ”ãƒªã‚«ãƒ¬", "ç¾ã—ãã™ã‚‹"]
  ];
  const pickedAinu = ainuWords[Math.floor(Math.random() * ainuWords.length)];
  document.getElementById("fortune").textContent = fortunes[Math.floor(Math.random() * fortunes.length)];
  document.getElementById("ainu").innerHTML = `${pickedAinu[0]}<span>(${pickedAinu[1]})</span>`;
}
loadExtraInfo();

(async()=>{
  try{
    const r=await fetch("https://api.open-meteo.com/v1/forecast?latitude=42.58&longitude=142.13&current_weather=true");
    const d=await r.json();
    const icons={0:"â˜€ï¸",1:"ğŸŒ¤ï¸",2:"â›…",3:"â˜ï¸",45:"ğŸŒ«ï¸",61:"ğŸŒ§ï¸",71:"â„ï¸",95:"â›ˆï¸"};
    document.getElementById("weather").textContent=`${icons[d.current_weather.weathercode]||"â˜ï¸"} ${Math.round(d.current_weather.temperature)}â„ƒ`;
  }catch(e){}
})();

async function loadNews(t){
  const ul=document.getElementById("news");
  const urls={
    nhk: "https://www.nhk.or.jp/rss/news/cat0.xml",
    doshin: "https://www.hokkaido-np.co.jp/output/7/free/index.ad.xml",
    nl: "https://hokkaido-nl.jp/index.xml",
    tomakomai: "https://tomakomai.goguynet.jp/feed/",
    omocoro: "https://omocoro.jp/feed",
    rocket: "https://rocketnews24.com/feed/",
    v4jp: "https://valorantnews.jp/feed"
  };
  ul.innerHTML="<li>èª­ã¿è¾¼ã¿ä¸­...</li>";
  try {
    const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(urls[t])}`);
    const data = await response.json();
    if (data.status === 'ok') {
      ul.innerHTML = data.items.slice(0, 5).map(item => `<li><a href="${item.link}" target="_blank">${item.title}</a></li>`).join('');
    } else { throw new Error(); }
  } catch (e) { ul.innerHTML = "<li>å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</li>"; }
}

document.querySelectorAll(".news-tabs button").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".news-tabs button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    loadNews(b.dataset.type);
  };
});

const HOLIDAYS_2026 = {"2026-01-01":"å…ƒæ—¥","2026-01-12":"æˆäººã®æ—¥","2026-02-11":"å»ºå›½è¨˜å¿µã®æ—¥","2026-02-23":"å¤©çš‡èª•ç”Ÿæ—¥","2026-03-20":"æ˜¥åˆ†ã®æ—¥","2026-04-29":"æ˜­å’Œã®æ—¥","2026-05-03":"æ†²æ³•è¨˜å¿µæ—¥","2026-05-04":"ã¿ã©ã‚Šã®æ—¥","2026-05-05":"ã“ã©ã‚‚ã®æ—¥","2026-05-06":"æŒ¯æ›¿ä¼‘æ—¥","2026-07-20":"æµ·ã®æ—¥","2026-08-11":"å±±ã®æ—¥","2026-09-21":"æ•¬è€ã®æ—¥","2026-09-22":"å›½æ°‘ã®ä¼‘æ—¥","2026-09-23":"ç§‹åˆ†ã®æ—¥","2026-10-12":"ã‚¹ãƒãƒ¼ãƒ„ã®æ—¥","2026-11-03":"æ–‡åŒ–ã®æ—¥","2026-11-23":"å‹¤åŠ´æ„Ÿè¬ã®æ—¥"};
function changeMonth(diff) { currentViewDate.setMonth(currentViewDate.getMonth() + diff); draw(); }
function draw(){
  const year=currentViewDate.getFullYear(), month=currentViewDate.getMonth();
  const today = new Date();
  document.getElementById("calTitle").textContent=`${year}å¹´ ${month+1}æœˆ`;
  let html = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'].map(h => `<div class="cal-header">${h}</div>`).join('');
  const start=new Date(year, month, 1); start.setDate(1 - start.getDay());
  for(let i=0; i<42; i++){
    const d=new Date(start); d.setDate(start.getDate()+i);
    const dateStr = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
    const hName = (d.getFullYear() === 2026) ? HOLIDAYS_2026[dateStr] : "";
    let colorClass = (d.getDay() === 0 || hName) ? "sun" : (d.getDay() === 6 ? "sat" : "");
    const isToday = d.toDateString() === today.toDateString() ? "cal-today" : "";
    const isOtherMonth = d.getMonth() !== month ? "cal-dim" : "";
    html += `<div class="cal-cell ${isOtherMonth} ${isToday}"><div class="cal-num ${colorClass}">${d.getDate()}</div>${hName ? `<div class="holiday-name">${hName}</div>` : ""}</div>`;
  }
  document.getElementById("calGrid").innerHTML=html;
}

loadNews("nhk"); draw();
</script>
</body>
</html>